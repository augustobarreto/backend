// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

model NivelVaga {
  id          Int       @default(autoincrement()) @id
  name        String
  createdAt   DateTime  @default(now())

  @@map("niveis_vaga")
}

model ProcessoSeletivo {
  id                        Int       @default(autoincrement()) @id
  titulo                    String
  semestre                  String
  descricao                 String?
  edital_url                String
  etapa                     Etapa[]
  etapa_inscricao_inicio    DateTime
  etapa_inscricao_fim       DateTime
  arquivado                 Boolean?  @default(false)
  createdAt                 DateTime  @default(now())

  @@map("processos_seletivos")
}

model Etapa {
  id                        Int               @default(autoincrement()) @id
  etapa                     ProcessoSeletivo  @relation(fields: [processo_seletivo_id], references: [id])      
  processo_seletivo_id      Int               @unique
  name                      String
  data_inicio               DateTime
  data_fim                  DateTime
  createdAt                 DateTime          @default(now())

  @@map("etapas")
}

model Usuario {
  id            Int         @default(autoincrement()) @id
  login         String      @unique
  email         String      @unique
  senha         String
  professor     Professor?
  aluno         Aluno?
  createdAt     DateTime    @default(now())

  @@map("usuarios")
}

model Professor {
  id          Int  @id    @default(autoincrement())
  professor   Usuario     @relation(fields: [userId], references: [id])
  userId      Int         @unique
  siape       String      @unique

  @@map("professores")
}

model Aluno {
  id          Int           @id @default(autoincrement())
  aluno       Usuario       @relation(fields: [userId], references: [id])
  userId      Int           @unique
  matricula   String        @unique
  
  @@map("alunos")
}